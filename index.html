<!DOCTYPE html>
<html lang="ko-KR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="자바스크립트 코드를 실행하고 결과를 확인할 수 있는 온라인 실행기. 개별 실행 모드와 통합 실행 모드 지원, 실행 히스토리 저장 기능 제공"
    />
    <meta property="og:title" content="자바스크립트 실행기 - JS Runner" />
    <meta
      property="og:description"
      content="자바스크립트 코드를 실행하고 결과를 확인할 수 있는 온라인 실행기"
    />
    <meta property="og:image" content="./images/og-image.png" />
    <title>자바스크립트 실행기 - JS Runner with History</title>
    <link rel="stylesheet" href="./main.css" />
    <!-- CodeMirror 에디터 적용 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/codemirror.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/theme/dracula.min.css">
    <!-- Prism.js 에디터 적용 -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-vsc-dark-plus.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/3.0.6/purify.min.js"></script>
  </head>
  <body>
    <main>
      
      <form action="#" method="post" class="form-container">
        <h2 class="page-title">자바스크립트 실행기</h2>
        
        <label for="code-input" class="sr-only">자바스크립트 코드 입력</label>
        <textarea
          id="code-input"
          class="code-textarea"
          rows="5"
        ></textarea>
        
        <div class="checkbox-container">
          <label class="checkbox-label">
            <input type="checkbox" id="split-mode-checkbox" name="split-mode" />
            <span>
              <strong>개별 실행 모드</strong> (세미콜론 ; 마다 끊어서 실행 / 단순 값 확인용)
            </span>
          </label>
          <label class="checkbox-label">
            <input type="checkbox" id="strict-mode-checkbox" name="strict-mode" />
            <span>
              <strong>엄격 모드</strong> (Strict Mode)
            </span>
          </label>
        </div>

        <button type="submit" class="submit-button">실행하기</button>
      </form>

      <section class="ai-section" style="margin-top: 20px; border-radius: 8px;">
        <h2>🤖 AI 코드 분석</h2>
        <p>코드를 입력하고 분석 버튼을 누르면 AI가 구조도와 예측 결과를 보여줍니다.</p>
        
        <button type="button" id="analyze-btn" class="submit-button">AI 분석 시작</button>

        <div style="display: flex; gap: 20px; margin-top: 20px;">
            <div style="flex: 1;">
                <h3>📊 실행 예측</h3>
                <div id="ai-explanation" style="white-space: pre-wrap; background: #f4f4f4; padding: 15px; border-radius: 5px; min-height: 200px;"></div>
            </div>
            <div style="flex: 1;">
                <h3>🧩 로직 시각화</h3>
                <div class="mermaid" id="mermaid-view" style="background: #fff; border: 1px solid #eee; padding: 10px; border-radius: 5px;">
                    graph TD; A[분석 대기중...] --> B[버튼을 눌러주세요];
                </div>
            </div>
        </div>
      </section>

      <section class="result-section">
        <h2 class="result-title">현재 실행 결과</h2>
        <div class="result-container">
          <div class="result-box">
            <h3 class="result-box-title">Return Value</h3>
            <div class="result-content" id="return-value" aria-live="polite"></div>
          </div>
          <div class="result-box">
            <h3 class="result-box-title">Console Output</h3>
            <div class="result-content" id="console-value" aria-live="polite"></div>
          </div>
        </div>
      </section>
    </main>

    <section class="history-section">
      <div class="history-header">
        <h2 class="history-title">히스토리</h2>
        <button
          type="button"
          id="download-btn"
          class="download-button"
          aria-label="히스토리 html 파일로 다운로드"
        >
          html파일로 다운로드
        </button>
      </div>
      <ul id="history-list" class="history-list"></ul>
    </section>
    <!-- CodeMirror 에디터 적용 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/mode/javascript/javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/addon/display/placeholder.min.js"></script>
    <!-- Prism.js 에디터 적용 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
    
    <script src="script.js"></script>
  </body>
</html>
